project(Mucous)

# add_subdirectory(pymucous)
set(MUCOUS_SOURCES
    mucous.py
    )

project(Pymucous)

file(GLOB_RECURSE PYMUCOUS_FILES pymucous/*.py)

set(PYMUCOUS_SOURCES
    ${PYMUCOUS_FILES}
    )

execute_process(COMMAND python
    ${CMAKE_SOURCE_DIR}/cmake/get_python_lib.py museek
    OUTPUT_VARIABLE sitepackages
    OUTPUT_STRIP_TRAILING_WHITESPACE
    ERROR_VARIABLE error)

if(NOT sitepackages OR error)
    message(FATAL_ERROR
        "Failed to find Python's site-packages directory"
        ${sitepackages} ${error})
endif()

install(
    FILES ${PYMUCOUS_SOURCES}
    DESTINATION ${CMAKE_INSTALL_PREFIX}/${sitepackages}/pymucous
    )

install_python_executables("${MUCOUS_SOURCES}" bin)

set(MANPAGES
    mucous.1
    )
install(
    FILES ${MANPAGES}
    DESTINATION "${CMAKE_INSTALL_MANDIR}/man1"
    )

message("--> Mucous will be installed.")
